version: 2

sources:
  - name: raw_nyc_taxi
    description: "Raw NYC taxi data - simulates Fivetran landing zone"
    database: a8s-marketing
    schema: raw_nyc_taxi

    tables:
      - name: yellow_tripdata
        description: "Yellow taxi trip records from NYC TLC, Q1 2022 (~1M rows)"
        loaded_at_field: _fivetran_synced
        freshness:
          warn_after: {count: 24, period: hour}
          error_after: {count: 48, period: hour}
        columns:
          - name: vendor_id
            description: "TPEP provider code (1=Creative Mobile Technologies, 2=VeriFone Inc)"
          - name: pickup_datetime
            description: "Date and time when the meter was engaged"
          - name: dropoff_datetime
            description: "Date and time when the meter was disengaged"
          - name: passenger_count
            description: "Number of passengers in the vehicle (driver-entered)"
          - name: trip_distance
            description: "Elapsed trip distance in miles reported by the taximeter"
          - name: pickup_location_id
            description: "TLC Taxi Zone where the meter was engaged"
          - name: dropoff_location_id
            description: "TLC Taxi Zone where the meter was disengaged"
          - name: rate_code
            description: "Rate code in effect at end of trip (1=Standard, 2=JFK, 3=Newark, 4=Nassau/Westchester, 5=Negotiated, 6=Group)"
          - name: store_and_fwd_flag
            description: "Whether the trip record was held in vehicle memory before sending to vendor (Y=store and forward, N=not)"
          - name: payment_type
            description: "Payment method code (1=Credit card, 2=Cash, 3=No charge, 4=Dispute, 5=Unknown, 6=Voided)"
          - name: fare_amount
            description: "Time-and-distance fare calculated by the meter"
          - name: extra
            description: "Miscellaneous extras and surcharges including $0.50 and $1 rush hour and overnight charges"
          - name: mta_tax
            description: "$0.50 MTA tax automatically triggered based on the metered rate in use"
          - name: tip_amount
            description: "Tip amount (automatically populated for credit card tips; cash tips are not included)"
          - name: tolls_amount
            description: "Total amount of all tolls paid in trip"
          - name: imp_surcharge
            description: "$0.30 improvement surcharge assessed on hailed trips at the flag drop"
          - name: total_amount
            description: "Total amount charged to passengers (does not include cash tips)"
